<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:md="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
                    xmlns:static="clr-namespace:Personnel.Application.ViewModels.Staffing;assembly=Personnel.Application.ViewModels"
                    xmlns:localConverters="clr-namespace:Personnel.Appn.Converters"
                    xmlns:helperConverterss="clr-namespace:Helpers.WPF.Converters;assembly=Helpers.WPF">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Button.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.CheckBox.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <helperConverterss:ReverseBooleanToVisibilityConverter x:Key="departmentsReverseBooleanToVisibilityConverter"/>
    <BooleanToVisibilityConverter x:Key="departmentsBooleanToVisibilityConverter"/>

    <DataTemplate DataType="{x:Type static:DepartmentsEditViewModel}" x:Key="DepartmentsTreeViewTemplate">
        <Grid>
            
            
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                <TreeView ItemsSource="{Binding Path=Tree}">
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Childs}" DataType="{x:Type static:DepartmentEditViewModel}">
                            <TreeViewItem Header="{Binding Department.Name}"/>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </ScrollViewer>
        </Grid>
    </DataTemplate>

    <DataTemplate DataType="{x:Type static:DepartmentsEditViewModel}" x:Key="DepartmentsViewTemplate">
        <Grid>
            <md:ColorZone Mode="Light" Padding="16"
                          Visibility="{Binding IsLoaded, Converter={StaticResource departmentsReverseBooleanToVisibilityConverter}}">
                <WrapPanel Orientation="Horizontal">
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}" 
                                 IsIndeterminate="True"
                                 VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    <TextBlock Text="Загрузка дерева отделов..." Margin="8" VerticalAlignment="Center"/>
                </WrapPanel>
            </md:ColorZone>

            <md:ColorZone Mode="Dark" Padding="16"
                          Visibility="{Binding HasError, Converter={StaticResource departmentsBooleanToVisibilityConverter}}">
                <WrapPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Error}" Margin="8" VerticalAlignment="Center"/>
                </WrapPanel>
            </md:ColorZone>

            <ContentPresenter Margin="16"
                              Content="{Binding}"
                              ContentTemplate="{DynamicResource DepartmentsTreeViewTemplate}"
                              Visibility="{Binding IsLoaded, Converter={StaticResource departmentsBooleanToVisibilityConverter}}"/>
        </Grid>
    </DataTemplate>

</ResourceDictionary>